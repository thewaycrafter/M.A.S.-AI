'use client';

import { useTheme } from './ThemeProvider';
import styles from './ThemeToggle.module.css';

export default function ThemeToggle() {
    const { theme, toggleTheme } = useTheme();
    const isDark = theme === 'dark';

    return (
        <button
            className={styles.toggleContainer}
            onClick={toggleTheme}
            aria-label={`Switch to ${isDark ? 'light' : 'dark'} mode`}
            title={`Switch to ${isDark ? 'light' : 'dark'} mode`}
        >
            <div className={`${styles.toggle} ${isDark ? styles.dark : styles.light}`}>
                {/* Track background with circuit pattern */}
                <div className={styles.track}>
                    <div className={styles.circuitLines}>
                        <div className={styles.circuitLine}></div>
                        <div className={styles.circuitLine}></div>
                        <div className={styles.circuitLine}></div>
                    </div>
                </div>

                {/* Knob with icon */}
                <div className={styles.knob}>
                    <div className={styles.iconContainer}>
                        {/* Sun icon */}
                        <div className={`${styles.icon} ${styles.sunIcon} ${!isDark ? styles.active : ''}`}>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                <circle cx="12" cy="12" r="5" />
                                <line x1="12" y1="1" x2="12" y2="3" />
                                <line x1="12" y1="21" x2="12" y2="23" />
                                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
                                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
                                <line x1="1" y1="12" x2="3" y2="12" />
                                <line x1="21" y1="12" x2="23" y2="12" />
                                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
                                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
                            </svg>
                        </div>

                        {/* Moon icon */}
                        <div className={`${styles.icon} ${styles.moonIcon} ${isDark ? styles.active : ''}`}>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
                            </svg>
                        </div>
                    </div>

                    {/* Glowing ring effect */}
                    <div className={styles.glowRing}></div>
                </div>

                {/* Data particles */}
                <div className={styles.particles}>
                    <span className={styles.particle}></span>
                    <span className={styles.particle}></span>
                    <span className={styles.particle}></span>
                </div>
            </div>

            {/* Label */}
            <span className={styles.label}>
                <span className={styles.labelText}>{isDark ? 'DARK' : 'LIGHT'}</span>
                <span className={styles.modeIndicator}>{isDark ? 'üåô' : '‚òÄÔ∏è'}</span>
            </span>
        </button>
    );
}
